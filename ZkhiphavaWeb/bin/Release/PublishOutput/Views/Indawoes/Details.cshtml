@model ZkhiphavaWeb.Models.Indawo

@{
    ViewBag.Title = "Details";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="row">
    @{
        var fee = "";
        if (Model.entranceFee != 0)
        {
            fee = "R" + Model.entranceFee.ToString();
        }
        else
        {
            fee = "FREE";
        }
        
        var color = "";
        if (Model.openOrClosedInfo.ToLower() == "open")
        {
            color = "green";
        }
        else if (Model.openOrClosedInfo.ToLower() == "closed")
        {
            color = "red";
        }
    }
    <div class="col-md-3">
        <div>
            <div class="card w-50">
                <div class="card-body">
                    <h3 style="font-family:'Segoe Print'" class="card-title yellow"> @Model.name </h3>
                    <p>
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            @Html.ActionLink("Edit ", "Edit", new { id = Model.id })
                            @Html.ActionLink("| Delete", "Delete", new { id = Model.id })
                        }
                    </p>
                    <p class="white"> @Model.address | @Model.city</p>
                    <div class="card-text">
                        <div class="row">
                            <div class="col-md-4">
                                <p id="@Model.id" class="distance yellow"></p>
                            </div>
                            <div class="col-md-4 white" style="color:@color">
                                @Model.openOrClosedInfo
                            </div>
                            <div class="col-md-4 white">
                                @fee
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-md-4">
                                @for (int i = 0; i < Model.rating; i++)
                                {<span class="fa fa-star yellow"></span>}
                            </div>

                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-md-6">
                        <a style="width:100%" class=" btn btn-primary btn-sm" onclick="getDirections('@Model.address')">
                            Maps <span class="glyphicon glyphicon-map-marker"></span>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="@Model.instaHandle" class="btn btn-primary btn-sm">Instagram<span class="glyphicon glyphicon-picture"></span></a>
                    </div>
                </div>
            </div>

            <hr />
            <h4 style="font-family:'Segoe Print'" class="white">Operating hours</h4>
            @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
            {
                <a href=@Url.Action("CreateOp", "Indawoes", new { indawoId = Model.id })>Create operating hour</a>
            }
            @foreach (var oph in Model.oparatingHours)
            {
                <div class="row">
                    <div class=" col-md-4">
                        <p class="yellow">@oph.day</p>
                    </div>
                    <div class="col-md-8">
                        <p class="white">@oph.openingHour.ToShortTimeString()  @oph.closingHour.ToShortTimeString()</p>
                    </div>
                </div>
                if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a href=@Url.Action("EditOp", "Indawoes", new { id = oph.id, indawoId = oph.indawoId })>Edit |</a>
                    <a href=@Url.Action("Delete", "OperatingHours", new { id = oph.id })>Delete</a>
                }
            }
            <hr />

        </div>
        @if (Model.events.Count() != 0)
        {
            <div class="white pull-left">
                <h4>Events</h4>
                <hr />
                @foreach (var item in Model.events)
                {
                    <div class="card" style="width: 50rem;">
                        <h3 style="font-family:'Segoe Print'" class="yellow">@item.title.ToUpper()</h3>
                        <img style="width:300px; height: 200px;" src=@item.imgPath class="card-img-top" alt="...">
                        <div class="card-body">
                            <a href="@item.url)" class="btn btn-primary"> Destails</a>
                            <a class="btn btn-primary" onclick="getDirections('@item.address')">Directions</a>
                            <a class="btn btn-primary"> Tickets</a>
                        </div>
                    </div>
                }
                @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a class="pull-right" href=@Url.Action("CreateEvent", "Indawoes", new { indawoId = Model.id })>Create Event</a>
                }
            </div>
        }


        <h4 class="yellow">Special Instructions</h4>
        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
        {
            <a href=@Url.Action("CreateSp", "Indawoes", new { indawoId = Model.id })>Create Special instruction</a>
        }
        <hr />
        @if (Model.specialInstructions.Count() != 0)
        {
            foreach (var sp in Model.specialInstructions)
            {
                <p class="yellow">@sp.instruction</p>
                if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a href=@Url.Action("Edit", "SpecialInstructions", new { id = sp.id })>Edit |</a>
                    <a href=@Url.Action("Delete", "SpecialInstructions", new { id = sp.id })>Delete</a>
                }
            }
        }
        <p>@Html.ActionLink("Back to List", "Index")</p>
    </div>
    <div class="col-md-9">

        <div class="container">
            <div id="myCarousel" class="carousel slide col-md-12" style="width:100%; height:400px; padding-top:20px;" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    @*@{
                            var index = 0;
                            var className = "";
                            foreach (var item in Model.images)
                            {
                                if (index == 0)
                                {
                                    className = className + "item active";
                                }
                                else { className = "item"; }
                                <div class=@className>
                                    <img style=" width:100%; height:400px; border-radius:3%" src=@item.imgPath>
                                    <br />
                                    <br />
                                    @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                                    {
                                        <a href=@Url.Action("EditImg", "indawoes", new { id = @item.id, indawoId = @item.indawoId })>Edit |</a>
                                        <a href=@Url.Action("Delete", "Images", new { id = @item.id })>Delete</a>
                                    }
                                </div>
                                index++;
                            }
                        }*@
                    <div class="item active">
                        <img style=" width:100%; height:400px; border-radius:3%" src=@Model.images.ElementAt(0).imgPath>
                        <br />
                        <br />
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <a href=@Url.Action("EditImg", "indawoes", new { id = Model.images.ElementAt(0).id, indawoId = Model.images.ElementAt(0).indawoId })>Edit |</a>
                            <a href=@Url.Action("Delete", "Images", new { id = Model.images.ElementAt(0).id })>Delete</a>
                        }
                    </div>
                    <div class="item">
                        <img style=" width:100%; height:400px; border-radius:3%" src=@Model.images.ElementAt(1).imgPath>
                        <br />
                        <br />
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <a href=@Url.Action("EditImg", "indawoes", new { id = Model.images.ElementAt(1).id, indawoId = Model.images.ElementAt(1).indawoId })>Edit |</a>
                            <a href=@Url.Action("Delete", "Images", new { id = Model.images.ElementAt(1).id })>Delete</a>
                        }
                    </div>
                    <div class="item">
                        <img style=" width:100%; height:400px; border-radius:3%" src=@Model.images.ElementAt(2).imgPath>
                        <br />
                        <br />
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <a href=@Url.Action("EditImg", "Indawoes", new { id = Model.images.ElementAt(2).id, indawoId = Model.images.ElementAt(1).indawoId })>Edit |</a>
                            <a href=@Url.Action("Delete", "Images", new { id = Model.images.ElementAt(2).id })>Delete</a>
                        }
                    </div>
                </div>

                <!-- Left and right controls -->
                <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>

<script src="~/Scripts/Ziwava.js"></script>
<script>
    $('#Yourcontainer').hover(function () {
        $("#Carousel").carousel('pause');
    }, function () {
        $("#Carousel").carousel('cycle');
    });

</script>



